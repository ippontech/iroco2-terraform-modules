## ---------------------- GLOBAL -------------------------------
environment = "dev"
aws_region  = "eu-west-3"

## ---------------------- NETWORK ------------------------------
cidr               = "10.0.0.0/23"
public_subnets     = ["10.0.0.0/26", "10.0.0.64/26"]
private_subnets    = ["10.0.0.128/26", "10.0.0.192/26"]
database_subnets   = ["10.0.1.0/26", "10.0.1.64/26"]
subdomain_name     = "subdomain"
zone_name          = "domain.fr"

# Whether to create VPC endpoints (Interface endpoints) in the VPC. We recommend to use NAT Gateway by default.
# Our VPC endpoints setup is using SSM documents in order to be:
# - Better FinOps, as it's cheaper than a NAT Gateway (when scheduled for work hours)
# - Better security, as it's using private endpoints instead of public ones
# But be careful, SSM documents deploying VPC endpoints means:
# - Trigger manually the SSM document to create VPC endpoints the first time you deploy the stack, or wait for the first time the SSM document is triggered by the schedule
# - Be sure to have an ECR repository with the images for backend service + keycloak
create_vpc_endpoints = false

## ---------------------- ECS ----------------------------------
container_insight_setting_value = "disabled"
capacity_provider               = "FARGATE_SPOT"
container_cpu                   = 512
container_memory                = 2048
container_image                 = ""
cors_allowed_origins            = "https://domain.fr,http://localhost:3000"

## ---------------------- BASTION ---------------------------------
create_bastion      = true
down_recurrence     = "0 23 * * *"
up_recurrence       = "0 6 * * MON-FRI"
bastion_volume_size = 10
instance_type       = "t3a.nano"

## ---------------------- RDS CONFIG ------------------------------
rds_instance_name           = "irocalc"
rds_instance_class          = "db.t4g.micro"
rds_database_engine_version = "15"
rds_database_engine         = "postgres"
rds_allocated_storage       = 10
rds_backup_retention_period = 5
rds_is_multi_az             = false
rds_database_port           = 5432
rds_database_name           = "irocalc"
rds_deletion_protection     = false
